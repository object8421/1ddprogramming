持久与数据库编程
=============

db其实是桌面软件，但它是desktop sever组件里的(不要把桌面CS结构跟WEB-它代表INTERNET，跟WEB的BS结构混淆，后者是跟桌面对立的WEB平台)
数据库主要不是针对文件系统对象进行持久化，不是用来取代文件系统，而是与语言(这在搭配了mssql的visualstudio ide中很常见)协作用来持久化内存结构的字段，往往是变量，用来取代语言运行时系统的(比如，数据库系统常用reflection库实现，这往往需要语言提供较强的运行期类型识别设施)


sql应该是跟web平等的东西，，它有自己的生态，，，而不仅是跟ui一样的桌面基建，它还是应用。。






\媒体与信息表示

text,,,audio,,bitmap,,video 表示,,all about encoding and decoding,their show all about rendering,,,mutiplemedia techs(represent and show,,tranport) all about this

比如文本

游戏拼音输入法等只是南极星的一个特例

后者就只能逐字转换了，或者统一转为unicode，再以unicode为中间格式向其它编码体系转，，一般地，中日寒这样的语言多字节部分的编码称为mutilpbyte,,,对应的unicode称为widechar，这是windows系统的api眼光下的称法

编码，包括内码，包括unicode都是区位指定，所以转换，只能逐字转换，提供一个转换表，还是按一定公式，每种语言有非统一的多种编码，比如中文有gb2313,gbk,也有统一的一种编码，比如unicode chinese simpled，中日翰这样的字体编码，往往很大。它们的单字符和多字符部分前者往往可以公式，后者就只能

南极星作为一个，工作在cjk之间,作通用view，通用转换，(这二者实为同一东西)，，输入（内码支持,to unicode中间格式的转换，各种内码对应输入法），它少的是一个wordprocesser的东西作编辑实用，而不仅是完成通用输入输出


字体文件是对一种字体编码和字形绘制方式的持久化。并不包括对另一种编码的转换

Minlearn's Techs字体编码指定

polutils的convertable 是to unicode的convertable,,,inside ffximain.dll中的编码是shift jis的

raknet hookpluginapi is a engine frontend,just like mpge commander,,not the real hook

ffxiwindower is like raknet hookpluginapi

点阵font 文件，，actually是converation table??


ffxi polviewer中的data dir，，有font资料？？汉化得从这入手？？做到oem loginer中？？
如果一个文本文件采用BIG5编码，系统当前的ANSI代码页是GBK。打开这个文件，就会显示乱码
应用软件一般采用的是操作系统自带的矢量字体，而游戏大多不用系统字体，而是自制字库
这个字体，是指从程序原理上关于如何显示文字从0开始的一套解决方案，所以跟操作系统提供的字体是平等的，因为软件上的东西（软件渲染的字体库），，是不分第三方和系统支持的。。
无须系统支持的硬件渲染加速支持的
当编码的设计者，和该应用的使用者选择不当的编码时，，出现矛盾时，就会出现乱码
在游戏中因为内码的原因不能输入汉字的问题
还是因为没有输入法不能输入，，有的字体系统是供显示，有的是供输入，，有的二者皆顾
其实不能写就是不能显问题，，不能打出来，，也是因为内码显不了，为什么不显示？号
是因为没有输入法？
日文系统下的中文unicode，，，什么情况
中日韩的使用的是同一UNICODE字符集????
APP的多国语言支持，，多内码支持，，统一unicode支持？？
有日文的shift jp等ansi编码，也有中文的gb2313等ansi编码，也有这这二者一统的unicode编码
字体文件是字体的持久总刮，包括编码，字形等的所有定义，对于字体技术，不同编码之间的转换(比如内欠的情况)，和将其集成到一种综合格式的技术，，是二大重要技术点
ffximain.dll对于英日德法的支持，是基于unicode的，还是对这三个不同版本的内码分别支持
其实它定制了shift js日文iso，，有自己修过改的convent tables
增加EXE的内码支持，，才有可能将其汉化，如果其一开始不支持，呢，，没办法了，只能用applocale之类的模拟了？
这不仅是修改一个参数(语言属性)那么简单，比如vc crt中，大量函数都有单字和宽字两个版本
如果游戏软件本身无编译生成时的参数指导其中的文字如何(按外在其中已有的编码系统)显示，操作系统也不会接手这个过程。关键是大多游戏软件不使用操作系统的支持。而使用自己的软件上的字体表示和显示体系。
非位图字形库的矢量字库，游戏中多采用
字体文件即字形数据库
字形字体的表现绘制技术与它的编码表示技术并不同
蛮干汉化法
蛮干汉化调试破解出原exe显示文字的函数级逻辑，，转化其字形为特定要翻译到的内码系统。
exe体内或引用到的资源文件体内中的文字
1）、用 mbstowcs () 函数。就是多字节编码到宽字符的转换。　　　2）、用 GB2312 2 Unicode 的转换表，手动查表转换。就是我说的蛮干汉化 　　　　3）、用 iconv () 函数。
由于字体编码是mapping，，所以很容易出现标准与变体，，一个程序为了隐藏它的资源，，有时是文本，，也可以设置变体来挠乱调试者的努力。
所以一个程序解释文字表示的方式往往可以是专有的。不用被编译器指定，，在这种情况下，，必须要弄清编码的一一对应，才能进行翻译或互译



数据库领域的“问题”：数据库的数学基础
-------------

关系代数 xx


可持久化
-------------

在一个应用中，有时，数据跟逻辑的关系很难绝然分清，有时，数据就是逻辑，逻辑也可表现为数据，用数据来表示逻辑（这些在第4章会有讲解），就称为可持久化。
把内存逻辑模式转为硬盘可持久模式的机制就是可持久机制[1. 可以形象地说，计算机数据库与数据学是硬盘发展来的，计算机图形学是显卡发展来的，等等],,像文件啊,数据库,都是可持久,,,
可持久就是让东东变得可以永久而不会在一次程序运行之后就不再存在保存不了其状态，这个概念和可持续发展中的可持续相似,persistently ,内存是不持久的,使内存持久,就是持久化技术,硬盘上的文件是静态的,从硬盘上加载东西到内存是一个方向,,从内存到硬盘,就称为持久.什么样的进程才是动态的呢?那种能持久化输入和输出的进程,才是.比如delphi的二进制窗体文件,它将控件OO对象存入一个硬盘文件,以后编译时可加入到代码中来,这就涉及到OO的持久化问题！！专门用来定义可持久OO对象的语言称为ODL!!
###### 文件系统
文件被存放在硬盘上(作为二进制),它有一套地址(可以用一个十六进制工具直接打开,并针对某个内容-这个内容必定有一个外存地址,进行编辑并保存,注意不能用记事本之类的,因为计算机只能以ASCII格式保存,会破坏原文件的地址),文件被加载入内存之后(map),又有一套内存中的地址,,一些静态分析工具就会求出这个地址对应它在硬盘上的地址(偏移地址加镜像基)

>为什么我们需要二进制格式呢?因为一方面这是为了存放的需要,二进制相对ASCII码格式,也即文本格式的文档(用户的软件叫文档,,但是这里只表示ASCII码的文档)存储占用的空间少,装载它所花的内存镜像少,WEB上传输的统一格式是XML文档,可是XML文档也有它的二进制格式(这是因为xml通常是面向文档的,它跟二进制对比面向人们端的处理方便,,但是面向计算机端的运行效益不如二进制,,因此xml通常作为一种中间格式而不是最终的格式来被应用),另一方面,因为二进制就是计算机表示信息的方法(ASCII则是向人们提供可识别信息的手段,ASCII更准确来说是一种编码标准而已,有更新的替代方案如Unicode)在处理上会快得多,PE文件就是一种典型的二进制文件,更更一个方面,,二进制格式可以保密(说实话有一些网上传输的字节流只能编码成二进制以加密比如base64,,base64是将二进制加密成文本在网络上传输的方法),,当人们需要一种加密的文件格式时,通常都会选择用二进制表示的某种格式,当然你也可以把二进制作为node嵌入到XML中,这样XML就作为外部的统一打包格式(这就是人们常说的“XML是一种数据的数据,,metaData” 因为XML语法可以用来描述一切领域的数据)

在Java的眼中,文件跟内存跟网络一样都是一个流源,有索引文件,Hash文件,顺序文件,块文件等这跟数据结构有关 文件跟算法的关系更密切,因为计算机的算法本质上不是纯数学的(它是真实以计算机的时空资源为代价的),,,就像计算机的数值学只能是离散的而不能是脱离计算机的(实际上数值跟计算机学结合是扩展了还是?一句话:数学这个概念并不是我们想象中的纯数学,与计算机结合了的数学才是真正的数学)文件就是空间资源
文件系统本来就是一种DB(数据库语义就是持久语义的一种)，它的节点用树来来表达，用树形表达所存数据是通用的DB方案，DB也是一种FS，因为DB可内存有文件这样的二进制数据blob data,虽然DB往往是外存的，这就像2d gui和3d,作为os的基础建设一样，db与fs其实也是可以被统一的
###### 记录文件
在内存中是流式对象,对象会变成字节流,通常会发给另一台机器.而对于固定对象,不同语言实现的对象之间是不同的,同一个语言不同编译器也会有所不同,对象保存在磁盘中.即使程序中止运行,它们仍可保持自己的状态不变.对于这些类型的数据存储,一个特别有用的技巧就是它们能存在于其他媒体中.一旦需要,甚至能将它们恢复成普通的、基于RAM的对象.这就是数据库要解决的问题
也即,Datatype就是泛化意化上的数据,它跟持久合结合产生数据库,跟内存结合产生数据结构学
###### 专用的持久：数据库
文件就是可持久,,普通文件和数据库都可以用来可持久

文件系统本身就是一个大数据库[2. 文件系统主要被做成了面向用户的而不是程序员的,文件的确可以直接被程序员所用,但int i=90；这样的程序逻辑不可能独占一个i.txt文件,用于持久化.所以经常用csv来模拟这样的filesystem db. 即文件系统它不能存内存中的小件,OS不但面向开发者,而且面向应用者,就像SQL一样,如果面向开发者,那么SQL之类的不需要,如果面向用户,那么就需要front end sql,所以软件的用户一般有二大类.] - 它的算法实现b树,在大量数据库实现中也有涉及.(sql这样的东西,不是数据库必要的东西,它是人们为了更好利用数据库,发展出来的东西,对于系统程序员,只需要有数据库引擎本身就够了)而专门的数据库往往用了专门的存储引擎（称为驱动）

sql只是db分析员要做的事，它对于程序员过于高阶，所以有的数据库引擎没有集成sql，而只完成一个DB必须要做的事。即存储和查询。
###### 语义DB:SQL
在具体平台上,数据库问题是唯一一个(相比界面,网络编程等来说)不需要“编程”解决的问题,我们只需要作为用户,而不是程序员,懂得如何使用“SQL”就够了.这得益于平台本身,将数据库独立成一个应用,而不是一种停留在C或,C++级的编程应用的级别上.

平台之数据库
-------------

应用是严格的,所以一个真正产品级的数据库系统都要有很强的回滚机制啊,提供快速的查询反映.数据库系统是用它的应用来定义的.比如它要支持什么能力的应用.数据库系统满足几条原则,就跟政府给产品定标准一样,所以有人说,真正的设计是以产生规范为结果的,

数据库系统(这里提到的是狭义的,指具体某种数据库比如SQL及基于它的某个数据库管理系统比如SQLServer,广义的数据库系统包括人员,硬件,软件等,而数据库管理系统是一个数据库系统的核心软件,因为某种数据库的某个数据库管理系统几乎是这种数据库的代表,因此在说到数据库系统时一般就是指它的某个数据库管理系统)与文件系统都是为了对数据的存取和管理更方便.注意这里提到了存取和管理,更准确地说,数据库(管理)系统是科学地组织数据(用三个模式来对数据进行抽象)+高效地存取和维护数据(查询处理器和存储管理器,在SQLServer中是查询分析器) 因此一个数据库(管理)系统首先要抽象数据,再向用户提供它的存取和维护接口(维护比如转化,导出,备份) 对数据进行抽象不但包括对数据本身进行抽象(概念模式),还要对数据的存储结构进行抽象(内模式),,还要对数据基于用户的那部分进行抽象(外模式) 数据库结构对泛指意义上的所有数据库的结构进行描述,为了提出一个数据库结构,及为了对这种具体的数据库结构进行讨论,发展了数据库的三级结构,,即内外和概念模式 概念模式: 数据模型是数据库结构的基础,所以提出了数据模型这一概念,它用来描述数据的一组概念和定义,最常用的数据模型分为概念数据模型和基本数据模型,,前者是用用户的观点对数据和信息进行建模,是现实世界到信息世界的第一层抽象,其中最著名的是实体-联系模型,简称E-R模型. 后者是用计算机的观点对数据和信息进行建模,有层次型,网状模型,关系模型,面向对象的数据模型[3. 因为在程序语言表达的“对象”和对象数据库中存在的数据对象存在很多偶合,因此对数据的对象化建模往往对于开发(程序语言方面),以及对数据的管理(DBMS方面)来说,都是很方便的],,对象关系数据模型(最后二种是最新出现的高级模型)

概念模式被简称为模式,与数据模型相关,不实现访问控制等这些外模式做的事情,比如关系数据库的概念模型就是关系模式的集合.在SQL中,关系模式称为“基本表table”,,,内模式即存储模式被称为“存储文件”(也即数据库系统所支持的数据类型比如varbinary,varchar,image等),外模式即子模式称为视图View[4. 像unix系统,有二种关于文件的视图,一种是文本格式,一种是二进制格式.视图,就是逻辑上的数据被物理上呈现给用户的方法.](一个或多个表的集合),元组称为行(一个记录),属性称为列(一个字段)
内模式: 数据库是与文件系统密切相关的,也称为子模式,数据库按它的内模式存在硬盘上,与文件系统有关,微软的下一个文件系统就是一种被称为WinFS的数据库文件系统

虽然说数据库系统克服了文件系统数据联系弱,数据不一致和数据冗余大的特点,但当数据库在几百TB大时,文件系统的优势就比一般比数据库还好(几百T大的数据库在大型应用中是很常见的要注意),故虽然在数据库中可存储图像,二进制数据,但一般在数据库过大时(并且图像最好直接放硬盘上进行编辑的需要),,,并不将这些东西放进数据库中

在SQL中,内模式即存储模式被称为“存储文件”(也即数据库系统所支持的数据类型比如varbinary,varchar,image等)

外模式也称用户模式或子模式,是用户与数据库系统的接口,是用户用到的那部分数据的描述(抽象),用户通过这个模式与数据库系统进行交互

数据库结构的三个模式(外模式,模式和内模式)都是对数据库结构的数据部分定义, 在数据库管理系统中一般有三个功能1数据定义功能2数据操纵功能3数据库的运行管理,数据库的三模式即第一部分功能(这就是数据库系统的数据字典).

既然,在一个数据库系统中,数据库结构的数据定义部分是由数据库管理系统来提供的,,因此数据库管理系统不仅仅是一种软件而更像是一种规范(比如SQL).

数据分析，数据库设计
-------------

数据分析与数据库编程不一样，就像network programming，socket programming不一样，network,socket programming与网络组建也不一样一样，，后者更像是一种艺术，而非一种科学。

>数据是否是编程

在一个应用中，与数据库有关的工作，由于发展出了DBMS，和类似SQL这样的语言，于是它分开了当初构建应用的程序员[5. 由于出现了dbms,sql这样的逻辑，不光是编程被分开了，而且数据分析，设计与操作，可以完全独立于os,dbms,app,等等]，将工作下放到了数据员（分析员和操作员）。由于分开了逻辑与数据，此时，对数据的操作**不再称为编程**(编程指的是：比如发明一个dbms，及在程序内书写操作数据的逻辑)，不是程序员的工作，**而是数据分析，设计和操作**，是数据库管理员的工作。

新发展
-------------

对数据库的开发(对其开发)经历了一个从偏向数学,机器到靠近人脑的OO过程,

在关系数据库时代,过程性语言跟关系数据库的程序逻辑中的数据模式是相对应的,然而当程序语言发展到了今天的OO时代,如果再使用关系型数据库就像把车放进车库里之前把它拆散了,明天开的时候再把它装起来(一辆车本来就是一个整体,而且是具备一个逻辑可运行的整体,仅仅是为了存储的需要而把它拆散是不必要的抽象,因为明天还要把车推出车库再开嘛),,OO数据库里的数据都是OO对象的实例,这种数据模型逻辑完全对应了OO程序的程序逻辑,而且省了中间查询语言这层为了使用而设立的高层抽象,,用编程语言的本地语言就可以,并且可以保证代码的类型安全,
而在关系模式中,查询语句往往作为字符串被传递到程序,,虽然有一些机制可以保证它的代码安全性,(有用某种语言写的存储过程,比如用一个Java会话bean写成的会话bean)然而大部分情况下,一些东西还是不能被避免的,比如数据库存在一个程序中并不存在的实例引用(对象应该只包括变量与操作,但是考虑其与本地的接入点,内存引用指针来说,一个对象就应该包括这三部分了),数据库依然会为它产生一个查询(而只有在type safe机制下才能保证一个未被引用的变量引用在编译时被调试到)

###### oo db

数据库处理对象数据的持久化,在数据密集型应用中,关系型数据库可以办到,,OO数据库就更好了

有一个于2002年解散的组织创立了一个OQL,对象查询语言,然而它被放到OO数据库就是不必要的中间抽象,这是为什么呢?

###### nosql db

在web意识到sql属于过设计之后，又提出no sql database

###### xml

xml越来越成为某种“标准通用持久格式表示”系统了