Web与SOA
=============

自从web之父提出web之后，它的模型就早已不是那个链接式所代表的静态的html网页了，而是由在应用架构，开发架构上都发生了重大变动的一系列新web元素组成的概念体系。甚至其本身都可独立作为一种平台(即webos ------ 当然，把它称为os其实是有水份的，因为这个所谓os并不指代真实的os，它只是侧重指一种“相对于普通OS下存有app，而WEBOS下有webware”而言的，以后会谈到)。可见业界对它的抽象已进入了一个极其复杂化的程度。

web的发展促成了很多其它编程领域的变动，小到xml的提出。很多应用和开发领域都使用了它(为结构化文档语义)。大到java语言的出现，框架编程等等。所有这一切，都不能说它跟前世今生的web没有一点关系。






Web的模型
-------------


在最初,web是一种www协议下的c/s应用(socket of cgi-like protocol: scgi, fcgi, http)，这里的c就是broswer,s就是webserver,在服务端,web服务器与cgi程序交互(cgi是一套协议标准)，程序员编程能响应请求，回复页面的webserver扩展，在客户端,浏览器与ria程序交互(很早以前就有flash)，程序员使用js语言处理客端页面逻辑显示页面内容(纯粹的rwc或混合了ria的rwc)，扩展性架构就在这里

**直至发展到现今,web已成为一种分布式应用开发架构的统称，在模型上，存在有纯静态的web,restful的web,也有长链接的web，在开发方式上有http web,soap web,rpc web等等，所以web也存在很多种。然而，无论这种架构怎么变，其最鲜明的特点：用页面pages来组织应用元素和开发元素的方式依然没有变。**

>比如在服务端webserver除了一个datasever。难道不只剩下了一个pagesever吗？如果说websever是通用意义上的appsever.那么这pagesever不就是guisever或showsever吗？即带pageserver.mediasteamsever.datasever.domainlogic sever的generalappsever。那么一个page不就是applet了吗？

widgets是一些同时整合了gui和logic的脚本扩展，web开发中的pages不就是widgets吗

所有的动态网页都是网关程序。是介于websever和写动态网页的语言运行库间（这个中间层叫网关注意不是网络的网关）的程序。比如以前有cgi等。而且动态网页不是标准的普通程序。而是“页面程序”。所以websever强调的不是数据库和url（参见restful）而是它对页面程序的支持。


那么web都有什么样的变化呢？
###### 从restful web到ria web
最初典型的web是restful的.比起传统C/S程序来说(BS是CS的一种)，它是web从应用架构和开发架构上发生的第一个巨变，比如，采用了request/response模式型，从url索引化了资源。界面。数据库等。使用了cookie机制等等。
web也曾向桌面应用和开发靠扰，比如增强化web的界面(这可以向broswer提供plugin增强其功能)和为了达到一种长链接的效果，业界使用了ajax,comet等方案,ajax是解决无刷新，comet是解决长连接，所有这些都是基于restful的web企图向传统桌面应用的一些努力（相比使用ajax,comet等纯粹的rwc技术,业界越来越倾向于用混合了rwc的ria方案来解决，当这二者都不能达到理想效果时，业界甚至动用了标准化broswer的html5方案）然而，这是惹人讨厌的，基于web的长链接，没有web的restful模型简练，那样又走回桌面应用的繁复性了。

所以restful模型依然是现今web的主流模型。
###### 加入了企业的分布式处理的web : rpc web
web一个很鲜明的特点是它使用了语义化的文档，这使得web越来越向语义化方向发展，当页面内容全部都用xml结构来表达时(比如医院的网页有医院专属的xml节点词汇),那么web上的内容可以成为被良好索引的数据库。

但语义化只体现了web的一个发展方向，以xml为基础，在开发方式上，web还经过了向rpc web发展的历

以前的web是在tcp上发展起来的http.其根本是一种传送文档(html)性质的连网技术和用户协议.将其与rpc结合，就成了rpc web，这样，新式的web较传统的web就具有了企业分布式架构的特点，即语言独立和平台独立。
###### object web,xml web services
大约在出现xmlrpc(其实它是xmlhttprpc),soap这样的东西之后,web不再是以前那个web了[1. 以前的是系统程序和系统开发,现在的web是用分布式思路解决的web问题,所以是企业程序.作为wsdl的web,与传统的web,虽然都是services,但,前者是传统的桌面的解决方案,后者是基于分布的思想与企业的.这是二个不同的流派,就跟硬件程序员和软件程序员是二个不同的流派,内核程序员和用户程序程序员一样是二个节然不同的程序流派.分布式与服务导向,与构件化,是企业开发三大特征.实际上,这三大特征正是紧密联系的.和相通的,比如,分布式必然是种网络方案,而企业要求跨平台,所以这只能是二进制的构件,又因为企业要求跨语言,所以只能是IDL这样的方案,这就要求构件是在二进制级接口透露的一些服务.]


.net vm这样的分布式web平台超越了apache cgi web sever这样的桌面解决方案，这是web从桌面迁移到真正的分布式平台上的表现，分布式应用从此寄托于分布式计算平台，进而产生了云计算

**(加入了rpc的web是一种受编程语言在进程内直接描述的语义 - "object:面向对象的对象一词"支撑起来的应用,故称语义web)**

开发方式上的改变
-------------

web应用的BS特点，web页面程序的MVC特点 
决定了web开发是桌面开发之后最狭隘，应用领域最有限的那个领域。

每一个WEB程序，，都是作为管理的S端与接受浏览的B端的合一，，天生就是一个集B/S为一体的程序，，而且，它强调将界面远程呈现给用户不用下载，，所以，它将程序的方方面面做成了一个称为WEB的框架，如何将legay native apps也做成一种类web的框架呢？


aspx的web控件是基于组件的吗
compent取代了传统web的page,成为可重用的基石，控件，就像aspx的控件一样


web rendered htmls has no event loops,,so uses ajax to achive increment refresh
页面靠刷新的增量更新的web page gui

web开发其实还是本地开发，他的重点不是h t t p 后面的东西，也不是前端页面技术。而是通用文本处理领域。然后通过c g i 做成服务就行了。以使用或不使用框架的方式


js作为云计算的前端技术语言，无论它再怎么办，，是作为WEB的前端，无论它是html5还是脱离ie的扩展，如flash,o3d,最终都离不开js，或者它的某种变形，这是传统WEB的趋势的某种东西


###### 使用分布式执行环境
基本上，这就是java,.net，无需多讲。前面在阐述这二种语言与web开发的关系时已多处有述。
###### 使用中间件
降低软件开发难度的一种途径是改变软件的概念,这是什么逻辑??这个道理听起来就像,要想XX必先自宫.

这就是使用中间件，这实际上是api的极大化。

>中间件强调不必复用部分不必要被编程(它是抽象未完成到应用的软件),因而不必复用的部分做成程序员不可见的中间层 - ,这根本上改变了软件的概念,因为出现了middleware这样的软件.企业的开发就成了买卖既有的领域中间件,比如web领域就有webware,而不再通用的software称，软件就成了saas.

######页面程序

服务端：

>**spring.net,django,等web框架的架构** django是一个基于mvc的dp框架,model就是数据库逻辑了,你可以以class foo(models.model)的方式继承该类,产生一种model,,所谓一个model,就是一个如何使用持久的Python逻辑了[2. django中,对于持久数据库层,,1.你固然可以用sql Python binding的那些逻辑,django集合方式,一种是对象方式,其实关系代数学的sql,,就是以集合的方式来操作DB.可以一次性返回多值,查询多域,.这是关系数据库的本质,2.但是django对他们有更high level的orm封装,,与语言达到自然统一],比如一个table类. 而template作为mvc中的view[3. 要注意:mvc中,v对应django中的template,而不是webapp/views.py,因为那是contrl,而contrl才对应webapp/views.py.因为那里才是django框架的中心部分.],是表现逻辑,然而它并不像clientside web programming中的Javascript一样负责实际的显示,它只是从接受contrl中来的数据,控制显示"什么",而不是"如何"显示的问题.

>页面表现的语言,javascript

我们处在一个开发的云计算时代。云计算是强调把应用分为肥服务的一端和瘦接受服务的一端。web服务的bs模式就是这种代表。因为两者的计算能力和方向并不相同。所以未来的编程是分bs 的。基于.net 语言的系统开发和web 开发都是服务端的事。而我们显然还没有解决客户端的事。 

云计算下的客户端开发强调面向文档的编程，文档语义化和领域脚本化。而不再是io.db.net. 而是基于可视编辑器的制作。基于领域逻辑的脚本写作。及产品级的设计。这种语言有别于通用编程使用的全功能语言只需要是一种纯表现领域逻辑的嵌入式语言。 

在web 界这种就是javascript。在web 界的领域逻辑主要有rwc 和ria.注意r 并不只用来指代界面。还有包括html5 的canvas 和websocket。本地存储等等的东西。（比如flash 的air 是一个不折不扣的包括类似普通桌面客户端程序在内的全功能客户端方案。只不过它要小并且是有限制的） 

除了web。还有其它的云计算领域还使用着这种语言。或向云计算的解决方案靠拢。未来的编程只需要是领域相关的。 

所以。如果一心专注于web 开发而不想涉及到服务端编程的。就使用js 吧 

ps：这个js 绝不是commonjs 或.net 的severside  jscript


客户端：

>前端的taglets,templets，体现了抽象的化大为小，很强大

这当中有一个复杂的模板语言(许多语言都有专门的模板语言库),里面有大量的变量和标签[4. django中,模板有可替代的方案,比如jini,模板是Python版的js,对应于js语言或asp语言对于内嵌在动态页面的意义],负责复杂的模板生成技术[5. django中有二大可以不断发挥的advance地方,写模板和url映射..django中有二大可以自定义的中间逻辑部分,比如中间件和通用视图, 中间件,模型和模板间,和通用视图,模型和视图间].

相比之下,webapp/views.py(我只是这样举个例子)中才是实际的django处理所在,model处在django引擎最深处,它负责与view交互那些持久层的逻辑,而view处理与template的关系,负责控制显示"经由用户post动作,与view发生交互后产生到引擎深处model层的变化,,,view再负责把这个变化带给template",实际的显示就是django.httprespond这样了(clientside web programming就是Javascript,ajax,div css了).

所以在一个典型而完整的django程序中,是包含了这三大逻辑的,model主持久,template主表现,view主控制.这也是一个典型的web程序的三层.

软件即服务
-------------

在出现了极其新型的web之后，还出现了框架式编程和java这样的分布式执行环境，这导致了web向一个更高的境界发展 ------ 将web作为分布式软件的模型。这就是软件即服务,**SAAS，它又为出现webos和云计算垫定了基础。**

>以前是网络即计算机,,现在是程序即动态web页面,network is pc,application is dyamic server pages,即所谓的云计算的一部分

理解SAAS是关键是分清问题的由来.

网络曾一度被错误定位,它是作为一个通讯平台存在,而不是一个严格的计算平台,比如web服务,它的计算资源,是S端的web server和B端的browser,它们是专用进程,而不是通用进程,而其实,网络在这个过程中,只发挥了一个通讯的功能,而没有发挥它作为计算平台-用于协作计算的功能.

基于web的分布式应用是可行的但终究不是原生的。因为它中间有一层web服务器。只有基于远程com组件的分布式才是原生的。
RPC,RMI这样的东西才是使问题变得清楚的方式.首先,网络就是计算机,进程就是计算机,计算机真正的计算能力的驻体是进程,网络加进程,不就是“分布式软件”了吗?而分布式软件,其隐含的意义,不就是“软件即服务”吗?比如,XMLRPC,ＷＳＤＬ,这才是web作为分布式软件的代表,而不是CGI+apache+ie

当然,rpc要解决二个问题,如果仅是上面这样,RPC只解决了使网络变成计算平台的问题(在使用RPC的方式下,你体会不到跟LPC有什么区别,RPC必须保证它抽象了进程在网络间交互的细节),还没有解决这种新的观念如何被实现的方法(即开发上有没有带来比传统方式更为难的方式)

我们可以使用服务组件的方式,比如COM,EJB,这些方式基于二进制的服务,仅涉及到接口定义(IDL)语言(而非接口描述).

即saas=rpc+idl



>《分清idl技术中的各种主体与客体的关系》 Idl是什么?它主要解决的是什么问题,中间件,分布,还是远程对象??还是基于消息的并发?这是一个过度设计,还是一个精密科学的设计? 第一,IdL(接口描述?接口定义语言)是interface based design 语言[6. 面向接口的设计,就好比将整个语言关于设计的层面,都搬到以接口作为基础(当然,面向接口的设计体系,其本身往往是面向OO的设计体系支撑起来的,比如C++).这像极了C++用template,将设计搬到template上面(于是产生generic programming和meta programming) ,], 作为interface based design,可以不用到idl,只需用到java inteface或C++ 抽象方法. 第二,它还是一种“抽象规范”语言,而非跟C,C++,PY一样的实现语言.IDL比它们都要高一层次. 作为“对实现语言的抽象规范”,可以不用idl.( 实际上解决这样的问题甚至可能不需要一门语言.因为概念上的映射就可以,实际上此时还是实现语言) 第三,“是二进制构件语言”, 对“二进制构件”, 比如COM,IdL要用 (rpc与com,dcom不是同一东西.rpc可以不用idl,但com,dcom(它基于rpc),得用idl) 第四,Rpc用到根,桩,(com的是构件,rpc的是分布式构件)需要“提供根桩机制的”二进制构件语言, RPC,不可以脱离IDL这样的东西独立存在.比如corba Corba:It's a binary and network standard that allows any two components to communicate regardless of what machine they're running on (as long as the machines are connected), Corba技术的核心,一是idl及映射,二是远程调用逻辑,命名服务等(这才是主体即RMI相当的服务),所以IDL解决了corba中关于第一方面的问题而已. 企业开发往往是分布式应用,,而rpc和corba就是,基于构件的分布式应用. rpc,就是以进程直接作为服务器,而不是一台机器作为服务器,这样本地写软件跟远程写软件一样,因此也做到分布,即SAAS 那么中间件呢?ejb不但包括rmi(一种跟corba同性质的东西),还包括jsp,servlet,所以对于中间件,rmi技术,解决的是提供一个对于分布式组构件的容器.

无论如何,这种方法将软件看成是服务,而把软件制造过程,变成了服务的组合过程.这将避免传统软件开发方法带来的很多问题. 这实际就是面向接口编程的极大化

首先,软件不再是本地安装方式的一个一个实体,而是存在于网络上的一个个可访问的服务,使用软件即租用服务(软件的SP,servieces provide就会大有嫌头了,未来的主流软件真的将会是这样的吗?)
这就已经有云计算的意义在里面了。


###### 总结
如果说前面几章讲的系统编程的话[7. 系统编程是相交的,比如界面编程中也有进程编程,每种编程后面都是一张网,都可以随着应用问题的不同性往无限深处扩展.比如http就发展成为了web],那么这里讲的就是一种高阶编程,即web开发,注意,它深克不同于系统编程中的socket和internet编程,划分开web与socket,internet的那个界限正是横在他们中间的那道门:web比internet和socket更高级,而socket和internet都**属于某种解决系统功能相关的编程.也即系统编程.** web编程是一种高度抽象的编程,在这个地方,你几乎见不到语言内数据结构和复杂持久逻辑的东西(这些度层的东西都不应是如此高级的web所要管的,否则,这个高级web有点徒有虚名).因为web框架可以抽象它,一个ORM可以帮你解决很多问题.而Python,Java这样的语言,高度抽象了数据结构. 当然,背景是:web开发几乎是用不到数据结构的,即使要用到,也有库来助阵,除非你的应用实在BT. 在client side,实际上除了实现复杂的Javascript的东西,写网页逻辑只是那么几条,再复杂,,就是div+css,ajax了. 如果深入到一台后台的http respond,就有soap,这样的东西了 当然,我们这里只讲解Server Side Web,客户端的有富网页技术等[8. 参见选读部分中的富网页技术]


web trend : 将桌面与web融合，甚至mobile平台与web融合
-------------


###### Web与web os
我们在前头讲了那么多，我们讲到企业是最急功近利的力量，它推动着开发向一种集成化分布式的方向发展，传统以桌面为主的开发转向了以WEB开发为主的开发，应用为王的web站起来了。我们还讲到： 程序设计，是对“如何编程”在脱离具体编程层面进行的设计。 架构侧重指宏观上的库或框架中间件。 编程设计有架构，应用也有架构。 那么，如何用这些观点解读现在的WEB开发，与WEB设计呢（包括客端与服务端）？并探求如何改进它？比如，将WEB与桌面整合？

web编程是一种钻到牛角尖的领域开发[9. 这样说不是贬义],是高阶开发,像WEB开发+JAVA,这样的组合,使程序员彻底(也不是彻底,70%吧)不需要了解系统知识,,而可以进行编程(所以有人说WEB程序不是纯正的程序员,因为它们不懂计算机,只懂他们的工作业务,他们做的不是开发,而是逻辑配置,或称写脚本),

我们首先要明白一个观点，即web兴起恰好代表桌面及桌面开发稳定，而不是衰弱。传统的web本身就是一种云计算，因为它将GUI做到了服务端（js和html生成逻辑是被放到服务端的）。

j2ee ejb这样的东西既是WEBOS server端的应用架构，也是开发架构，更是中间件，**故框架一词，是同时指应用上和开发上的东西**
在客户端有ria的js和extjs这样的库。首先，CSS不妨看成一门语言，即面向文档和标记的语言(tag oriented,and docment oriented language)，与服务端的tag serverlet这样的脚本对应。

>在服务端，人们利用某种输出html的语言比如php来写服务端逻辑，内嵌脚本语句与写在html外的语言相比，可以不需要输出整个html，只需要在特定位置输出即可。 在客户端，html表达元素和结构，是网页内容，css表达表现，js dom api表达行为,css也相当于一门语言，内有类，伪类，属性，属性选择符，等东西，css修饰html，也可影响页面内容(所以不只html)，js dom可控制html，也可控制css的行为，因为html css构成了整个dom中docment一词。所以这三者的关系是css与html平等,js dom api在上 css,div实际上完全不需要js,提供js,只是在已经拥有tag language的基础上（css,div是文档化语言），还加上脚本化，这样就同时拥有了逻辑文档化和脚本化 双重方案，js实际上还是实现动态网页的必要手段（比如ajax），单纯的divcss只能呈现静态的页面

故,在编程方式中，利用tag 方式进行设计和编程，也是webos的一种架构方式，这种架构是“开发层次的架构”。


###### Web os下的开发

aspnet为未来的云计算，多核化，多平台提供了基础，也为移动设备应用编程提供了基础，ASPNET与NET融合表明，NET真正让WEBAPP成为internet app ,ie成为internet app explorer,比如增加除http之外的协议。


###### Web与web cloud平台

iaas,paas，，云也是一种应用架构，它整合桌面，移动到页面WEB方式

要分清本地web os与远程web os的区别，plam webos ,iphone ios等等都是本地web os,而现在也有一种远程webos,实际上，它是js web ria的极大化。其它方面如数据库等等，是属于后台的。

远程webos有GHOST,中国有千脑等等(web2.0,3.0只是此类远程webos的过渡阶段)，现今，一个网页，就是一个公司的OS，(当然，你也可以构建自己的网上OS，或称云)，打开就能供你使用，它提倡一切在WEB上完成，即所谓webos，它借助的技术是js或flash的ria,rwc。

这与云计算有点关系，因为它也是属于web 极大化，将应用全部搬到web上的一种趋势。这种趋势，同时影响了现今的应用架构，开发架构（详见web os下的开发那一小节）等等所有方面。

saas将把软件变成有线电视式的点播式收费方式（就跟有线电视的营利模式一样），这急切需要将本地WEBOS的能力迁移到远程WEBOS，已有数据库这样的服务器将PC的存储做到云端，还缺少将本地3D做到远程WEBOS的能力（比如做成视频流之类的远程服务器[10. 可播放式的，流式的3d web技术，可与云计算完美结合，会是以后的主流？？]），，本地不需要是一台NC，因为有时候也要搭建自己的云

你会看到由于远程WEBOS没有将本地WEBOS的能力过继过去，以致造成现今很多WEBOS无法使用或不好使用的情况，比如，3D处理与回放要借助本地，声音回放是放在本地的，这需要(我本人觉得)本地WEBOS要与远程WEBOS结合，才能完成一种完美的WEBOS组合。